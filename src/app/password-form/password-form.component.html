<div
  class="max-w-lg mx-auto p-8 bg-white shadow-lg rounded-lg border border-gray-light"
>
  <h1 class="text-3xl font-bold text-primary-blue mb-6">Password Generator</h1>
  <form (submit)="generatePassword()" class="space-y-6">
    <div class="flex items-center justify-between">
      <label for="length" class="text-lg font-medium text-gray-dark"
        >Password Length:</label
      >
      <span class="text-lg font-medium text-gray-dark"
        >{{ options.length }} characters</span
      >
    </div>
    <div>
      <input
        type="range"
        [(ngModel)]="options.length"
        name="length"
        min="12"
        max="100"
        class="w-full mt-2 accent-primary-blue"
      />
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div class="flex items-center">
        <input
          type="checkbox"
          [(ngModel)]="options.useNumbers"
          name="useNumbers"
          class="mr-2 h-5 w-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"
        />
        <label class="text-lg text-gray-dark">Numbers</label>
      </div>

      <div class="flex items-center">
        <input
          type="checkbox"
          [(ngModel)]="options.useSymbols"
          name="useSymbols"
          class="mr-2 h-5 w-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"
        />
        <label class="text-lg text-gray-dark">Symbols</label>
      </div>

      <div class="flex items-center">
        <input
          type="checkbox"
          [(ngModel)]="options.useLowercase"
          name="useLowercase"
          class="mr-2 h-5 w-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"
        />
        <label class="text-lg text-gray-dark">Lowercase</label>
      </div>

      <div class="flex items-center">
        <input
          type="checkbox"
          [(ngModel)]="options.useUppercase"
          name="useUppercase"
          class="mr-2 h-5 w-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"
        />
        <label class="text-lg text-gray-dark">Uppercase</label>
      </div>
    </div>

    <button
      type="submit"
      class="w-full py-3 mt-6 bg-primary-blue text-white rounded-lg shadow-md hover:bg-light-blue focus:outline-none focus:ring-2 focus:ring-primary-blue"
    >
      Generate Password
    </button>
  </form>

  <div *ngIf="generatedPassword" class="mt-8">
    <p class="text-xl font-semibold text-gray-dark">Your Password:</p>
    <div class="flex items-center space-x-2">
      <p class="text-lg font-mono text-primary-blue mt-2 break-words">
        {{ generatedPassword }}
      </p>
      <button
        (click)="copyPassword()"
        class="text-gray-dark hover:text-gray-700 focus:outline-none"
        aria-label="Copy password"
      >
        <svg
          class="w-6 h-6"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 7h10a2 2 0 012 2v10a2 2 0 01-2 2H8a2 2 0 01-2-2V9a2 2 0 012-2z"
          ></path>
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M16 3H8a2 2 0 00-2 2v4m2-4h10a2 2 0 012 2v10"
          ></path>
        </svg>
      </button>
      <span
        *ngIf="passwordCopied"
        class="text-success-green text-sm font-semibold"
        >Password Copied!</span
      >
    </div>

    <app-password-strength
      [password]="generatedPassword"
    ></app-password-strength>

    <button
      (click)="openEmailForm()"
      class="w-full mt-6 py-3 bg-success-green text-white rounded-lg shadow-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500"
    >
      Send to My Email
    </button>

    <!-- Modal for Email Form -->
    <div
      *ngIf="showEmailForm"
      class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"
    >
      <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full space-y-4">
        <h2 class="text-xl font-semibold text-gray-dark">Send Password</h2>
        <div>
          <label for="email" class="block text-lg font-medium text-gray-dark"
            >Email Address:</label
          >
          <input
            [(ngModel)]="email"
            type="email"
            class="w-full mt-2 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary-blue"
          />
        </div>
        <div>
          <label
            for="passwordName"
            class="block text-lg font-medium text-gray-dark"
            >Password Name:</label
          >
          <input
            [(ngModel)]="passwordName"
            type="text"
            class="w-full mt-2 p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-primary-blue"
          />
        </div>
        <div>
          <label
            for="generatedPassword"
            class="block text-lg font-medium text-gray-dark"
            >Password:</label
          >
          <p
            class="w-full mt-2 p-2 border border-gray-300 rounded bg-gray-100 font-mono text-primary-blue break-words"
          >
            {{ generatedPassword }}
          </p>
        </div>
        <div class="flex justify-end space-x-2 mt-4">
          <button
            (click)="sendEmail()"
            class="px-4 py-2 bg-primary-blue text-white rounded-lg shadow-md hover:bg-light-blue focus:outline-none focus:ring-2 focus:ring-primary-blue"
          >
            Send
          </button>
          <button
            (click)="closeEmailForm()"
            class="px-4 py-2 bg-gray-dark text-white rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
